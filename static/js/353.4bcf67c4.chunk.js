"use strict";(self.webpackChunkinsta_clone=self.webpackChunkinsta_clone||[]).push([[353],{9353:function(e,r,t){t.d(r,{Z:function(){return m}});var n=t(2791),s=t(1087),a=t(2303),o=t(6307),u=t(8155),c=t(4165),i=t(5861),l=t(9439),f=t(7606),d=t(184);function p(e){var r=e.visRef,t=e.index,n=e.username;return(0,d.jsx)("div",{ref:r,className:"flex items-center justify-start w-full h-14 p-4 mt-".concat(14*t," bg-white z-10 relative border-x last:border-b border-gray-primary"),children:"No results found"!==n?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("img",{className:"rounded-full w-8 h-8 flex mr-3",src:"/images/avatars/".concat(n,".jpg"),alt:""}),(0,d.jsx)(s.rU,{to:"/p/".concat(n),children:(0,d.jsx)("p",{className:"font-bold text-sm",children:n})})]}):(0,d.jsx)("p",{className:"font-bold text-sm",children:n})})}function h(){var e=(0,n.useState)(""),r=(0,l.Z)(e,2),t=r[0],s=r[1],a=(0,n.useState)([]),o=(0,l.Z)(a,2),u=o[0],h=o[1],m=function(e){var r=(0,n.useState)(e),t=(0,l.Z)(r,2),s=t[0],a=t[1],o=(0,n.useRef)(null),u=function(e){o.current&&!o.current.contains(e.target)?a(!1):a(!0)};return(0,n.useEffect)((function(){return document.addEventListener("click",u,!0),function(){document.removeEventListener("click",u,!0)}}),[]),{ref:o,isComponentVisible:s,setIsComponentVisible:a}}(!0),x=m.ref,w=m.isComponentVisible,v=function(e){e.preventDefault(),s("")};return(0,n.useEffect)((function(){var e=function(){var e=(0,i.Z)((0,c.Z)().mark((function e(){var r;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,f.fW)(t);case 2:r=e.sent,h(r);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();t.length>0&&e()}),[t]),(0,n.useEffect)((function(){w||s("")}),[w]),(0,d.jsxs)("div",{className:"text-gray-700 my-2 w-[30rem] border border-gray-primary rounded-xl",children:[(0,d.jsxs)("form",{className:"flex items-center justify-between pr-2",method:"POST",children:[(0,d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-6 h-6 ml-2",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"})}),(0,d.jsx)("input",{"aria-label":"Search",autoComplete:"off",className:"text-sm text-gray-base my-1 w-full h-8 ml-2 mr-3 px-4 rounded-md",type:"text",name:"search-user",placeholder:"Search...",value:t,onChange:function(e){var r=e.target;s(r.value)}}),t.length>0&&(0,d.jsx)("svg",{onClick:v,onKeyDown:function(e){"Enter"===e.key&&v(e)},xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-6 h-6",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.75 9.75l4.5 4.5m0-4.5l-4.5 4.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})]}),t.length>0&&w&&(u.length>0?u.map((function(e,r){return(0,d.jsx)(p,{visRef:x,index:r,username:e.username},e.docId)})):(0,d.jsx)("p",{className:"w-full h-14 p-4 bg-white text-gray-base z-10 relative border-x border-b border-gray-primary",children:"Searching..."}))]})}function m(){var e=(0,n.useContext)(a.Z).firebase,r=(0,n.useContext)(o.Z).user;return(0,d.jsx)("header",{className:"h-16 bg-white border-b border-gray-primary mb-8",children:(0,d.jsx)("div",{className:"container mx-auto max-w-screen-lg h-full",children:(0,d.jsxs)("div",{className:"flex justify-between h-full",children:[(0,d.jsx)("div",{className:"text-gray-700 w-fit text-center flex items-center align-items cursor-pointer",children:(0,d.jsx)("h1",{className:"flex justify-center w-full",children:(0,d.jsx)(s.rU,{to:u.h1,"aria-label":"Instagram Logo",children:(0,d.jsx)("img",{src:"/images/logo.png",alt:"Instagram",className:"mt-2  w-10/12 md:w-6/12"})})})}),(0,d.jsx)(h,{}),(0,d.jsx)("div",{className:"text-gray-700 text-center flex items-center align-items",children:r?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(s.rU,{to:u.h1,"aria-label":"Dashboard",children:(0,d.jsx)("svg",{className:"w-8 mr-6 text-black-light cursor-pointer",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})}),(0,d.jsx)("button",{type:"button",title:"Sign Out",onClick:function(){return e.auth().signOut()},onKeyDown:function(r){"Enter"===r.key&&e.auth().signOut()},children:(0,d.jsx)("svg",{className:"w-8 mr-6 text-black-light cursor-pointer",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})}),(0,d.jsx)("div",{className:"flex items-center cursor-pointer",children:(0,d.jsx)(s.rU,{to:"/p/".concat(r.displayName?r.displayName:r.username),children:(0,d.jsx)("img",{className:"rounded-full h-8 w-8 flex",src:"/images/avatars/".concat(r.displayName?r.displayName:r.username,".jpg"),alt:"".concat(r.displayName?r.displayName:r.username," profile")})})})]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(s.rU,{to:u.ym,children:(0,d.jsx)("button",{type:"button",className:"bg-blue-medium font-bold text-sm rounded text-white w-20 h-8",children:"Log In"})}),(0,d.jsx)(s.rU,{to:u._5,children:(0,d.jsx)("button",{type:"button",className:"font-bold text-sm rounded text-blue-medium w-20 h-8",children:"Sign Up"})})]})})]})})})}},7606:function(e,r,t){t.d(r,{$K:function(){return u},Gm:function(){return S},IU:function(){return C},OY:function(){return y},Oi:function(){return j},dQ:function(){return i},f2:function(){return w},fW:function(){return f},oJ:function(){return N},sd:function(){return g},ve:function(){return m},xD:function(){return p}});var n=t(1413),s=t(4165),a=t(5861),o=t(942);function u(e){return c.apply(this,arguments)}function c(){return(c=(0,a.Z)((0,s.Z)().mark((function e(r){var t;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.w.firestore().collection("users").where("username","==",r.toLowerCase()).get();case 2:return t=e.sent,e.abrupt("return",t.docs.map((function(e){return e.data().length>0})).length>0);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function i(e){return l.apply(this,arguments)}function l(){return(l=(0,a.Z)((0,s.Z)().mark((function e(r){var t;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.w.firestore().collection("users").where("username","==",r.toLowerCase()).get();case 2:return t=e.sent,e.abrupt("return",t.docs.map((function(e){return(0,n.Z)((0,n.Z)({},e.data()),{},{docId:e.id})})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){return d.apply(this,arguments)}function d(){return(d=(0,a.Z)((0,s.Z)().mark((function e(r){var t,a;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.w.firestore().collection("users").get();case 2:return t=e.sent,a=t.docs.map((function(e){return(0,n.Z)((0,n.Z)({},e.data()),{},{docId:e.id})})).filter((function(e){return e.username.includes(r.toLowerCase())})),e.abrupt("return",a.length>0?a:[{docId:0,username:"No results found"}]);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){return h.apply(this,arguments)}function h(){return(h=(0,a.Z)((0,s.Z)().mark((function e(r){var t,a;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.w.firestore().collection("users").where("userId","==",r).get();case 2:return t=e.sent,a=t.docs.map((function(e){return(0,n.Z)((0,n.Z)({},e.data()),{},{docId:e.id})})),e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e,r){return x.apply(this,arguments)}function x(){return(x=(0,a.Z)((0,s.Z)().mark((function e(r,t){var a;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.w.firestore().collection("users").limit(10).get();case 2:return a=e.sent,e.abrupt("return",a.docs.map((function(e){return(0,n.Z)((0,n.Z)({},e.data()),{},{docId:e.id})})).filter((function(e){return e.userId!==r&&!t.includes(e.userId)})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e,r,t){return v.apply(this,arguments)}function v(){return(v=(0,a.Z)((0,s.Z)().mark((function e(r,t,n){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",o.w.firestore().collection("users").doc(r).update({followers:n?o.G.arrayRemove(t):o.G.arrayUnion(t)}).then((function(e){return console.info("Success")})).catch((function(e){console.error("Error adding followers",e)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e,r,t){return Z.apply(this,arguments)}function Z(){return(Z=(0,a.Z)((0,s.Z)().mark((function e(r,t,n){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",o.w.firestore().collection("users").doc(r).update({following:n?o.G.arrayRemove(t):o.G.arrayUnion(t)}).then((function(e){return console.info("Success")})).catch((function(e){console.error("Error adding following",e)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e,r){return b.apply(this,arguments)}function b(){return b=(0,a.Z)((0,s.Z)().mark((function e(r,t){var u,c,i;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.w.firestore().collection("photos").where("userId","in",t).get();case 2:return u=e.sent,c=u.docs.map((function(e){return(0,n.Z)((0,n.Z)({},e.data()),{},{docId:e.id})})),e.next=6,Promise.all(c.map(function(){var e=(0,a.Z)((0,s.Z)().mark((function e(t){var a,o,u;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=!1,t.likes.includes(r)&&(a=!0),e.next=4,p(t.userId);case 4:return o=e.sent,u=o[0].username,e.abrupt("return",(0,n.Z)((0,n.Z)({username:u},t),{},{userLikedPhoto:a}));case 7:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()));case 6:return i=e.sent,e.abrupt("return",i);case 8:case"end":return e.stop()}}),e)}))),b.apply(this,arguments)}function j(e,r){return k.apply(this,arguments)}function k(){return k=(0,a.Z)((0,s.Z)().mark((function e(r,t){var u,c,i;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.w.firestore().collection("photos").where("photoId","==",r).get();case 2:return u=e.sent,c=u.docs.map((function(e){return(0,n.Z)((0,n.Z)({},e.data()),{},{docId:e.id})})),e.next=6,Promise.all(c.map(function(){var e=(0,a.Z)((0,s.Z)().mark((function e(r){var a,o,u;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=!1,t&&r.likes.includes(t)&&(a=!0),e.next=4,p(r.userId);case 4:return o=e.sent,u=o[0].username,e.abrupt("return",(0,n.Z)((0,n.Z)({username:u},r),{},{userLikedPhoto:a}));case 7:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()));case 6:return i=e.sent,e.abrupt("return",i);case 8:case"end":return e.stop()}}),e)}))),k.apply(this,arguments)}function N(e,r){return I.apply(this,arguments)}function I(){return(I=(0,a.Z)((0,s.Z)().mark((function e(r,t){var a,u;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.w.firestore().collection("photos").where("userId","==",r).get();case 2:return a=e.sent,u=a.docs.map((function(e){var r,s=!1;return null!==e&&void 0!==e&&null!==(r=e.data().likes)&&void 0!==r&&r.includes(t)&&(s=!0),(0,n.Z)((0,n.Z)({},e.data()),{},{userLikedPhoto:s,docId:e.id})})),e.abrupt("return",u);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e,r){return L.apply(this,arguments)}function L(){return(L=(0,a.Z)((0,s.Z)().mark((function e(r,t){var a,u;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.w.firestore().collection("users").where("username","==",r.toLowerCase()).where("following","array-contains",t).get();case 2:return a=e.sent,u=a.docs.map((function(e){return(0,n.Z)((0,n.Z)({},e.data()),{},{docId:e.id})})),e.abrupt("return",u.length>0);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e,r,t,n,s){return U.apply(this,arguments)}function U(){return(U=(0,a.Z)((0,s.Z)().mark((function e(r,t,n,a,o){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(t,a,r);case 2:return e.next=4,w(n,o,r);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}}]);
//# sourceMappingURL=353.4bcf67c4.chunk.js.map