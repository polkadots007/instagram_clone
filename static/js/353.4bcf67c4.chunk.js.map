{"version":3,"file":"static/js/353.4bcf67c4.chunk.js","mappings":"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","sources":["components/search/searched_profile.js","components/search/index.js","hooks/use_comp_visible.js","components/header.js","services/firebase.js"],"sourcesContent":["import { Link } from 'react-router-dom';\r\nimport PropTypes from 'prop-types';\r\n\r\nexport default function SearchedProfile({ visRef, index, username }) {\r\n  return (\r\n    <div\r\n      ref={visRef}\r\n      className={`flex items-center justify-start w-full h-14 p-4 mt-${\r\n        index * 14\r\n      } bg-white z-10 relative border-x last:border-b border-gray-primary`}\r\n    >\r\n      {username !== 'No results found' ? (\r\n        <>\r\n          <img\r\n            className=\"rounded-full w-8 h-8 flex mr-3\"\r\n            src={`/images/avatars/${username}.jpg`}\r\n            alt=\"\"\r\n          />\r\n          <Link to={`/p/${username}`}>\r\n            <p className=\"font-bold text-sm\">{username}</p>\r\n          </Link>\r\n        </>\r\n      ) : (\r\n        <p className=\"font-bold text-sm\">{username}</p>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nSearchedProfile.propTypes = {\r\n  visRef: PropTypes.object,\r\n  index: PropTypes.number,\r\n  username: PropTypes.string.isRequired\r\n};\r\n","import { useState, useEffect } from 'react';\r\nimport { searchUserByUsername } from '../../services/firebase';\r\nimport SearchedProfile from './searched_profile';\r\nimport useComponentVisible from '../../hooks/use_comp_visible';\r\n\r\nexport default function SearchBar() {\r\n  const [searchText, setSearchText] = useState('');\r\n  const [matchedUsers, setMatchedUsers] = useState([]);\r\n  const { ref, isComponentVisible } = useComponentVisible(true);\r\n\r\n  const handleSearchInput = ({ target }) => {\r\n    // setMatchedUsers([]);\r\n    setSearchText(target.value);\r\n  };\r\n\r\n  const handleClear = (event) => {\r\n    event.preventDefault();\r\n    setSearchText('');\r\n  };\r\n\r\n  useEffect(() => {\r\n    const handleSearch = async () => {\r\n      // event.preventDefault();\r\n      const profiles = await searchUserByUsername(searchText);\r\n      setMatchedUsers(profiles);\r\n    };\r\n    if (searchText.length > 0) handleSearch();\r\n  }, [searchText]);\r\n\r\n  useEffect(() => {\r\n    if (!isComponentVisible) setSearchText('');\r\n  }, [isComponentVisible]);\r\n\r\n  return (\r\n    <div className=\"text-gray-700 my-2 w-[30rem] border border-gray-primary rounded-xl\">\r\n      <form\r\n        className=\"flex items-center justify-between pr-2\"\r\n        method=\"POST\"\r\n        // onSubmit={(event) => (searchText.length > 0 ? handleSearch(event) : event.preventDefault())}\r\n      >\r\n        <svg\r\n          xmlns=\"http://www.w3.org/2000/svg\"\r\n          fill=\"none\"\r\n          viewBox=\"0 0 24 24\"\r\n          strokeWidth=\"1.5\"\r\n          stroke=\"currentColor\"\r\n          className=\"w-6 h-6 ml-2\"\r\n        >\r\n          <path\r\n            strokeLinecap=\"round\"\r\n            strokeLinejoin=\"round\"\r\n            d=\"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z\"\r\n          />\r\n        </svg>\r\n\r\n        <input\r\n          aria-label=\"Search\"\r\n          autoComplete=\"off\"\r\n          className=\"text-sm text-gray-base my-1 w-full h-8 ml-2 mr-3 px-4 rounded-md\"\r\n          type=\"text\"\r\n          name=\"search-user\"\r\n          placeholder=\"Search...\"\r\n          value={searchText}\r\n          onChange={handleSearchInput}\r\n        />\r\n\r\n        {searchText.length > 0 && (\r\n          <svg\r\n            onClick={handleClear}\r\n            onKeyDown={(event) => {\r\n              if (event.key === 'Enter') {\r\n                handleClear(event);\r\n              }\r\n            }}\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            fill=\"none\"\r\n            viewBox=\"0 0 24 24\"\r\n            strokeWidth=\"1.5\"\r\n            stroke=\"currentColor\"\r\n            className=\"w-6 h-6\"\r\n          >\r\n            <path\r\n              strokeLinecap=\"round\"\r\n              strokeLinejoin=\"round\"\r\n              d=\"M9.75 9.75l4.5 4.5m0-4.5l-4.5 4.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"\r\n            />\r\n          </svg>\r\n        )}\r\n      </form>\r\n      {searchText.length > 0 &&\r\n        isComponentVisible &&\r\n        (matchedUsers.length > 0 ? (\r\n          matchedUsers.map((profile, index) => (\r\n            <SearchedProfile\r\n              key={profile.docId}\r\n              visRef={ref}\r\n              index={index}\r\n              username={profile.username}\r\n            />\r\n          ))\r\n        ) : (\r\n          <p className=\"w-full h-14 p-4 bg-white text-gray-base z-10 relative border-x border-b border-gray-primary\">\r\n            Searching...\r\n          </p>\r\n        ))}\r\n    </div>\r\n  );\r\n}\r\n","import { useState, useEffect, useRef } from 'react';\r\n\r\nexport default function useComponentVisible(initialIsVisible) {\r\n  const [isComponentVisible, setIsComponentVisible] = useState(initialIsVisible);\r\n  const ref = useRef(null);\r\n\r\n  const handleClickOutside = (event) => {\r\n    if (ref.current && !ref.current.contains(event.target)) {\r\n      setIsComponentVisible(false);\r\n    } else {\r\n      setIsComponentVisible(true);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    document.addEventListener('click', handleClickOutside, true);\r\n    return () => {\r\n      document.removeEventListener('click', handleClickOutside, true);\r\n    };\r\n  }, []);\r\n\r\n  return { ref, isComponentVisible, setIsComponentVisible };\r\n}\r\n","import { useContext } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport FirebaseContext from '../context/firebase';\r\nimport UserContext from '../context/user';\r\nimport * as ROUTES from '../constants/routes';\r\nimport SearchBar from './search';\r\n\r\nexport default function Header() {\r\n  const { firebase } = useContext(FirebaseContext);\r\n  const { user } = useContext(UserContext);\r\n\r\n  return (\r\n    <header className=\"h-16 bg-white border-b border-gray-primary mb-8\">\r\n      <div className=\"container mx-auto max-w-screen-lg h-full\">\r\n        <div className=\"flex justify-between h-full\">\r\n          <div className=\"text-gray-700 w-fit text-center flex items-center align-items cursor-pointer\">\r\n            <h1 className=\"flex justify-center w-full\">\r\n              <Link to={ROUTES.DASHBOARD} aria-label=\"Instagram Logo\">\r\n                <img src=\"/images/logo.png\" alt=\"Instagram\" className=\"mt-2  w-10/12 md:w-6/12\" />\r\n              </Link>\r\n            </h1>\r\n          </div>\r\n          <SearchBar />\r\n          <div className=\"text-gray-700 text-center flex items-center align-items\">\r\n            {user ? (\r\n              <>\r\n                <Link to={ROUTES.DASHBOARD} aria-label=\"Dashboard\">\r\n                  <svg\r\n                    className=\"w-8 mr-6 text-black-light cursor-pointer\"\r\n                    xmlns=\"http://www.w3.org/2000/svg\"\r\n                    fill=\"none\"\r\n                    viewBox=\"0 0 24 24\"\r\n                    stroke=\"currentColor\"\r\n                  >\r\n                    <path\r\n                      strokeLinecap=\"round\"\r\n                      strokeLinejoin=\"round\"\r\n                      strokeWidth={2}\r\n                      d=\"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6\"\r\n                    />\r\n                  </svg>\r\n                </Link>\r\n                <button\r\n                  type=\"button\"\r\n                  title=\"Sign Out\"\r\n                  onClick={() => firebase.auth().signOut()}\r\n                  onKeyDown={(event) => {\r\n                    if (event.key === 'Enter') {\r\n                      firebase.auth().signOut();\r\n                    }\r\n                  }}\r\n                >\r\n                  <svg\r\n                    className=\"w-8 mr-6 text-black-light cursor-pointer\"\r\n                    xmlns=\"http://www.w3.org/2000/svg\"\r\n                    fill=\"none\"\r\n                    viewBox=\"0 0 24 24\"\r\n                    stroke=\"currentColor\"\r\n                  >\r\n                    <path\r\n                      strokeLinecap=\"round\"\r\n                      strokeLinejoin=\"round\"\r\n                      strokeWidth={2}\r\n                      d=\"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1\"\r\n                    />\r\n                  </svg>\r\n                </button>\r\n                <div className=\"flex items-center cursor-pointer\">\r\n                  <Link to={`/p/${user.displayName ? user.displayName : user.username}`}>\r\n                    <img\r\n                      className=\"rounded-full h-8 w-8 flex\"\r\n                      src={`/images/avatars/${\r\n                        user.displayName ? user.displayName : user.username\r\n                      }.jpg`}\r\n                      alt={`${user.displayName ? user.displayName : user.username} profile`}\r\n                    />\r\n                  </Link>\r\n                </div>\r\n              </>\r\n            ) : (\r\n              <>\r\n                <Link to={ROUTES.LOGIN}>\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"bg-blue-medium font-bold text-sm rounded text-white w-20 h-8\"\r\n                  >\r\n                    Log In\r\n                  </button>\r\n                </Link>\r\n                <Link to={ROUTES.SIGN_UP}>\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"font-bold text-sm rounded text-blue-medium w-20 h-8\"\r\n                  >\r\n                    Sign Up\r\n                  </button>\r\n                </Link>\r\n              </>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </header>\r\n  );\r\n}\r\n","import { firebase, FieldValue } from '../lib/firebase';\r\n\r\nexport async function doesUsernameExist(username) {\r\n  const result = await firebase\r\n    .firestore()\r\n    .collection('users')\r\n    .where('username', '==', username.toLowerCase())\r\n    .get();\r\n\r\n  return result.docs.map((user) => user.data().length > 0).length > 0;\r\n}\r\n\r\nexport async function getUserByUsername(username) {\r\n  const result = await firebase\r\n    .firestore()\r\n    .collection('users')\r\n    .where('username', '==', username.toLowerCase())\r\n    .get();\r\n\r\n  return result.docs.map((item) => ({\r\n    ...item.data(),\r\n    docId: item.id\r\n  }));\r\n}\r\n\r\nexport async function searchUserByUsername(searchTerm) {\r\n  const result = await firebase\r\n    .firestore()\r\n    .collection('users')\r\n    // .where('username', '==', searchTerm.toLowerCase())\r\n    .get();\r\n\r\n  const profiles = result.docs\r\n    .map((item) => ({\r\n      ...item.data(),\r\n      docId: item.id\r\n    }))\r\n    .filter((item) => item.username.includes(searchTerm.toLowerCase()));\r\n  return profiles.length > 0 ? profiles : [{ docId: 0, username: 'No results found' }];\r\n}\r\n\r\nexport async function getUserByUserId(userId) {\r\n  const result = await firebase.firestore().collection('users').where('userId', '==', userId).get();\r\n  const user = result.docs.map((item) => ({\r\n    ...item.data(),\r\n    docId: item.id\r\n  }));\r\n  return user;\r\n}\r\n\r\nexport async function getSuggestedProfiles(userId, following) {\r\n  const result = await firebase.firestore().collection('users').limit(10).get();\r\n  return result.docs\r\n    .map((user) => ({\r\n      ...user.data(),\r\n      docId: user.id\r\n    }))\r\n    .filter((profile) => profile.userId !== userId && !following.includes(profile.userId));\r\n}\r\n\r\nexport async function updateProfileFollowers(profileDocId, loggedInUserId, isFollowingProfile) {\r\n  return firebase\r\n    .firestore()\r\n    .collection('users')\r\n    .doc(profileDocId)\r\n    .update({\r\n      followers: !isFollowingProfile\r\n        ? FieldValue.arrayUnion(loggedInUserId)\r\n        : FieldValue.arrayRemove(loggedInUserId)\r\n    })\r\n    .then((_) => console.info('Success'))\r\n    .catch((error) => {\r\n      console.error('Error adding followers', error);\r\n    });\r\n}\r\n\r\nexport async function updateUserFollowing(loggedInUserDocId, followerId, isFollowingProfile) {\r\n  return firebase\r\n    .firestore()\r\n    .collection('users')\r\n    .doc(loggedInUserDocId)\r\n    .update({\r\n      following: !isFollowingProfile\r\n        ? FieldValue.arrayUnion(followerId)\r\n        : FieldValue.arrayRemove(followerId)\r\n    })\r\n    .then((_) => console.info('Success'))\r\n    .catch((error) => {\r\n      console.error('Error adding following', error);\r\n    });\r\n}\r\n\r\nexport async function getPhotosByIds(userId, followingIds) {\r\n  const result = await firebase\r\n    .firestore()\r\n    .collection('photos')\r\n    .where('userId', 'in', followingIds)\r\n    .get();\r\n\r\n  const profilePhotos = result.docs.map((photo) => ({\r\n    ...photo.data(),\r\n    docId: photo.id\r\n  }));\r\n\r\n  const photosWithUserDetails = await Promise.all(\r\n    profilePhotos.map(async (photo) => {\r\n      let userLikedPhoto = false;\r\n      if (photo.likes.includes(userId)) {\r\n        userLikedPhoto = true;\r\n      }\r\n      const user = await getUserByUserId(photo.userId);\r\n      const { username } = user[0];\r\n      return { username, ...photo, userLikedPhoto };\r\n    })\r\n  );\r\n\r\n  return photosWithUserDetails;\r\n}\r\n\r\nexport async function getPhotoByPhotoId(photoId, loggedInUserId) {\r\n  const result = await firebase\r\n    .firestore()\r\n    .collection('photos')\r\n    .where('photoId', '==', photoId)\r\n    .get();\r\n\r\n  const profilePhoto = result.docs.map((photo) => ({\r\n    ...photo.data(),\r\n    docId: photo.id\r\n  }));\r\n\r\n  const photo = await Promise.all(\r\n    profilePhoto.map(async (photo) => {\r\n      let userLikedPhoto = false;\r\n      if (loggedInUserId && photo.likes.includes(loggedInUserId)) {\r\n        userLikedPhoto = true;\r\n      }\r\n      const user = await getUserByUserId(photo.userId);\r\n      const { username } = user[0];\r\n      return { username, ...photo, userLikedPhoto };\r\n    })\r\n  );\r\n  return photo;\r\n}\r\n\r\nexport async function getUserPhotosByUserId(userId, loggedInUserId) {\r\n  const result = await firebase\r\n    .firestore()\r\n    .collection('photos')\r\n    .where('userId', '==', userId)\r\n    .get();\r\n\r\n  // const photos = result.docs.map((photo) => ({\r\n  //   ...photo.data(),\r\n  //   docId: photo.id\r\n  // }));\r\n\r\n  const photos = result.docs.map((photo) => {\r\n    let userLikedPhoto = false;\r\n    if (photo?.data().likes?.includes(loggedInUserId)) {\r\n      userLikedPhoto = true;\r\n    }\r\n    return {\r\n      ...photo.data(),\r\n      userLikedPhoto,\r\n      docId: photo.id\r\n    };\r\n  });\r\n\r\n  return photos;\r\n}\r\n\r\nexport async function isUserFollowingProfile(loggedInUsername, profileUserId) {\r\n  const result = await firebase\r\n    .firestore()\r\n    .collection('users')\r\n    .where('username', '==', loggedInUsername.toLowerCase())\r\n    .where('following', 'array-contains', profileUserId)\r\n    .get();\r\n  const response = result.docs.map((item) => ({\r\n    ...item.data(),\r\n    docId: item.id\r\n  }));\r\n\r\n  return response.length > 0;\r\n}\r\n\r\nexport async function toggleFollow(\r\n  isFollowingProfile,\r\n  activeUserDocId,\r\n  profileDocId,\r\n  profileUserId,\r\n  followingUserId\r\n) {\r\n  await updateUserFollowing(activeUserDocId, profileUserId, isFollowingProfile);\r\n  await updateProfileFollowers(profileDocId, followingUserId, isFollowingProfile);\r\n}\r\n"],"names":["SearchedProfile","visRef","index","username","ref","className","src","alt","to","SearchBar","useState","searchText","setSearchText","matchedUsers","setMatchedUsers","initialIsVisible","isComponentVisible","setIsComponentVisible","useRef","handleClickOutside","event","current","contains","target","useEffect","document","addEventListener","removeEventListener","useComponentVisible","handleClear","preventDefault","handleSearch","searchUserByUsername","profiles","length","method","xmlns","fill","viewBox","strokeWidth","stroke","strokeLinecap","strokeLinejoin","d","autoComplete","type","name","placeholder","value","onChange","onClick","onKeyDown","key","map","profile","docId","Header","firebase","useContext","FirebaseContext","user","UserContext","ROUTES","title","auth","signOut","displayName","doesUsernameExist","collection","where","toLowerCase","get","result","docs","data","getUserByUsername","item","id","searchTerm","filter","includes","getUserByUserId","userId","getSuggestedProfiles","following","limit","updateProfileFollowers","profileDocId","loggedInUserId","isFollowingProfile","doc","update","followers","FieldValue","then","_","console","info","catch","error","updateUserFollowing","loggedInUserDocId","followerId","getPhotosByIds","followingIds","profilePhotos","photo","Promise","all","userLikedPhoto","likes","photosWithUserDetails","getPhotoByPhotoId","photoId","profilePhoto","getUserPhotosByUserId","photos","isUserFollowingProfile","loggedInUsername","profileUserId","response","toggleFollow","activeUserDocId","followingUserId"],"sourceRoot":""}