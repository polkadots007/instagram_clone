"use strict";(self.webpackChunkinsta_clone=self.webpackChunkinsta_clone||[]).push([[128],{6393:function(e,n,t){t.d(n,{Z:function(){return g}});var s=t(2791),r=t(1087),o=t(184);function a(e){var n=e.username;return(0,o.jsx)("div",{className:"flex border-b border-gray-primary h-4 p-4 py-8",children:(0,o.jsx)("div",{className:"flex items-center",children:(0,o.jsxs)(r.rU,{to:"/p/".concat(n),className:"flex items-center",children:[(0,o.jsx)("img",{className:"rounded-full h-8 w-8 flex mr-3",src:"/images/avatars/".concat(n,".jpg"),alt:"".concat(n," profile")}),(0,o.jsx)("p",{className:"font-bold",children:n})]})})})}function c(e){var n=e.src,t=e.caption;return(0,o.jsx)("img",{src:n,alt:t})}var l=t(4165),i=t(5861),u=t(9439),d=t(2303),m=t(6307);function x(e){var n=e.docId,t=e.totalLikes,r=e.likedPhoto,a=e.handleFocus,c=(0,s.useContext)(m.Z).user,x=null===c||void 0===c?void 0:c.uid,f=(0,s.useState)(r),p=(0,u.Z)(f,2),h=p[0],j=p[1],v=(0,s.useState)(t),g=(0,u.Z)(v,2),b=g[0],w=g[1],N=(0,s.useContext)(d.Z),y=N.firebase,k=N.FieldValue,Z=function(){var e=(0,i.Z)((0,l.Z)().mark((function e(){return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!x){e.next=5;break}return j((function(e){return!e})),e.next=4,y.firestore().collection("photos").doc(n).update({likes:h?k.arrayRemove(x):k.arrayUnion(x)});case 4:w((function(e){return h?e-1:e+1}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"flex justify-between p-4",children:(0,o.jsxs)("div",{className:"flex",children:[(0,o.jsx)("svg",{onClick:Z,onKeyDown:function(e){"Enter"===e.key&&Z()},xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",tabIndex:0,className:"w-8 mr-4 select-none ".concat(x?"cursor-pointer":"cursor-auto","     focus:outline-none ").concat(h?"fill-red text-red-primary":"text-black-light"),children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),(0,o.jsx)("svg",{onClick:a,onKeyDown:function(e){"Enter"===e.key&&a()},className:"w-8 text-black-light select-none ".concat(x?"cursor-pointer":"cursor-auto"," focus:outline-none"),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",tabIndex:0,children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})]})}),(0,o.jsx)("div",{className:"p-4 py-0",children:(0,o.jsx)("p",{className:"font-bold",children:"".concat(b,1===b?" like":" likes")})})]})}function f(e){var n=e.caption,t=e.username;return(0,o.jsxs)("div",{className:"p-4 pt-2 pb-0",children:[(0,o.jsx)("span",{className:"mr-1 pr-2 font-bold",children:t}),(0,o.jsx)("span",{children:n})]})}var p=t(7346),h=t(3433);function j(e){var n=e.docId,t=e.comments,r=e.setComments,a=e.commentInput,c=(0,s.useState)(""),l=(0,u.Z)(c,2),i=l[0],x=l[1],f=(0,s.useContext)(d.Z),p=f.firebase,j=f.FieldValue,v=(0,s.useContext)(m.Z).user.displayName,g=function(e){return e.preventDefault(),r([{displayName:v,comment:i}].concat((0,h.Z)(t))),x(""),p.firestore().collection("photos").doc(n).update({comments:j.arrayUnion({displayName:v,comment:i})})};return(0,o.jsxs)("div",{className:"flex items-center max-w-full",children:[(0,o.jsx)("img",{className:"flex-none rounded-full h-8 w-8 mx-3",src:"/images/avatars/".concat(v,".jpg"),alt:"".concat(v," profile")}),(0,o.jsx)("div",{className:"grow border-l border-t border-gray-primary rounded-l-md",children:(0,o.jsxs)("form",{className:"flex justify-between pl-0 pr-5",method:"POST",onSubmit:function(e){return i.length>=1?g(e):e.preventDefault()},children:[(0,o.jsx)("input",{"aria-label":"Add a comment",autoComplete:"off",className:"text-sm text-gray-base w-full mr-3 py-5 px-4 rounded-md",type:"text",name:"add-comment",placeholder:"Add a comment...",value:i,onChange:function(e){var n=e.target;return x(n.value)},ref:a}),(0,o.jsx)("button",{className:"text-sm font-bold text-blue-medium ".concat(!i&&"opacity-25"),type:"button",disabled:i.length<1,onClick:g,children:"Post"})]})})]})}function v(e){var n=e.docId,t=e.comments,a=e.posted,c=e.commentInput,l=e.expandAll,i=(0,s.useContext)(m.Z).user,d=null===i||void 0===i?void 0:i.uid,x=(0,s.useState)(t),f=(0,u.Z)(x,2),h=f[0],v=f[1],g=(0,s.useState)(l?h.length:3),b=(0,u.Z)(g,2),w=b[0],N=b[1];function y(){N((function(e){return e+3}))}return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"p-4 pt-1 pb-4",children:[h.length>=3&&w<h.length&&!l&&(0,o.jsx)("button",{className:"text-sm text-gray-base mb-1 cursor-pointer",type:"button",onClick:y,onKeyDown:function(e){"Enter"===e.key&&y()},children:"View more comments"}),h.slice(0,w).reverse().map((function(e){return(0,o.jsxs)("p",{className:"mb-1",children:[(0,o.jsx)(r.rU,{to:"/p/".concat(e.displayName),children:(0,o.jsx)("span",{className:"mr-1 font-bold",children:e.displayName})}),(0,o.jsx)("span",{children:e.comment})]},"".concat(e.comment,"-").concat(e.displayName))})),(0,o.jsxs)("p",{className:"text-gray-base uppercase text-xs mt-2",children:["Posted ",(0,p.Z)(a,new Date)," ago"]})]}),d&&(0,o.jsx)(j,{docId:n,comments:h,setComments:v,commentInput:c})]})}function g(e){var n=e.content,t=e.expandAllComments,r=(0,s.useRef)(null);return(0,o.jsxs)("div",{className:"rounded col-span-4 border bg-white border-gray-primary mb-12",children:[(0,o.jsx)(a,{username:n.username}),(0,o.jsx)(c,{src:n.imageSrc,caption:n.caption}),(0,o.jsx)(x,{docId:n.docId,totalLikes:n.likes.length,likedPhoto:n.userLikedPhoto,handleFocus:function(){return r.current.focus()}}),(0,o.jsx)(f,{caption:n.caption,username:n.username}),(0,o.jsx)(v,{docId:n.docId,comments:n.comments.reverse(),posted:n.dateCreated,commentInput:r,expandAll:t})]})}},7937:function(e,n,t){t.d(n,{Z:function(){return i}});var s=t(4165),r=t(5861),o=t(9439),a=t(2791),c=t(6307),l=t(7606);function i(){var e=(0,a.useState)({}),n=(0,o.Z)(e,2),t=n[0],i=n[1],u=(0,a.useContext)(c.Z).user,d=(0,a.useCallback)((0,r.Z)((0,s.Z)().mark((function e(){var n,t,r;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,l.xD)(u.uid);case 2:n=e.sent,t=(0,o.Z)(n,1),r=t[0],i(r);case 6:case"end":return e.stop()}}),e)}))),[u]);return(0,a.useEffect)((function(){null!==u&&void 0!==u&&u.uid&&d()}),[u]),{user:t}}},120:function(e,n,t){t.r(n),t.d(n,{default:function(){return b}});var s=t(2791),r=t(9353),o=t(2579),a=t(4165),c=t(5861),l=t(9439),i=t(6307),u=t(7606);t(5862);var d=t(6393),m=t(184);function x(){var e=function(){var e=(0,s.useState)(null),n=(0,l.Z)(e,2),t=n[0],r=n[1],o=(0,s.useContext)(i.Z).user.uid,d=void 0===o?"":o;return(0,s.useEffect)((function(){function e(){return(e=(0,c.Z)((0,a.Z)().mark((function e(){var n,t,s,o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.xD)(d);case 2:if(n=e.sent,t=(0,l.Z)(n,1),s=t[0].following,o=[],!(s.length>0)){e.next=10;break}return e.next=9,(0,u.OY)(d,s);case 9:o=e.sent;case 10:o.sort((function(e,n){return n.dateCreated-e.dateCreated})),r(o);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[d]),{photos:t}}(),n=e.photos;return(0,m.jsx)("div",{className:"container col-span-2 ml-2",children:n?(null===n||void 0===n?void 0:n.length)>0?n.map((function(e){return(0,m.jsx)(d.Z,{content:e,expandAllComments:!1},e.docId)})):(0,m.jsx)("p",{className:"text-center text-2xl",children:"Follow some people to see photos!"}):(0,m.jsx)(o.Z,{count:4,width:640,height:500,className:"block mb-5"})})}var f=t(7937),p=t(1087);function h(e){var n=e.username,t=e.fullName;return n&&t?(0,m.jsxs)(p.rU,{to:"/p/".concat(n),className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6 items-center",children:[(0,m.jsx)("div",{className:"flex items-center justify-between col-span-1",children:(0,m.jsx)("img",{className:"rounded-full w-14 h-14 flex mr-3",src:"/images/avatars/".concat(n,".jpg"),alt:""})}),(0,m.jsxs)("div",{className:"col-span-3",children:[(0,m.jsx)("p",{className:"font-bold text-sm",children:n}),(0,m.jsx)("p",{className:"text-sm",children:t})]})]}):(0,m.jsx)(o.Z,{count:1,height:61})}function j(e){var n=e.profileDocId,t=e.profileUsername,r=e.profileId,o=e.userId,i=e.userDocId,d=(0,s.useState)(!1),x=(0,l.Z)(d,2),f=x[0],h=x[1],j=(0,s.useState)(!1),v=(0,l.Z)(j,2),g=v[0],b=v[1];function w(){return(w=(0,c.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),e.next=3,(0,u.f2)(n,o,!1);case 3:return e.next=5,(0,u.sd)(i,r,!1);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return f||g?null:(0,m.jsxs)("div",{className:"group flex flex-col",children:[(0,m.jsx)("div",{className:"invisible group-hover:visible cursor-pointer w-0.5 h-0.5 scale-50 self-end pb-3 pr-4",onClick:function(){b(!0)},role:"presentation",title:"Remove from Suggestions",children:(0,m.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-6 h-6",children:(0,m.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})}),(0,m.jsxs)("div",{className:"flex flex-col md:flex-row items-start md:items-center align-items justify-between",children:[(0,m.jsxs)("div",{className:"flex items-center justify-between",children:[(0,m.jsx)("img",{className:"rounded-full w-8 h-8 flex mr-3",src:"/images/avatars/".concat(t,".jpg"),alt:""}),(0,m.jsx)(p.rU,{to:"/p/".concat(t),children:(0,m.jsx)("p",{className:"font-bold text-sm mb-4 md:mb-0",children:t})})]}),(0,m.jsx)("button",{className:"text-xs font-bold text-blue-medium ml-12 md:ml-0 -mt-4 md:mt-0",type:"button",onClick:function(){return w.apply(this,arguments)},children:"Follow"})]})]})}function v(e){var n=e.userId,t=e.docId,r=e.following,i=(0,s.useState)(null),d=(0,l.Z)(i,2),x=d[0],f=d[1];return(0,s.useEffect)((function(){function e(){return(e=(0,c.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.ve)(n,r);case 2:t=e.sent,f(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}n&&function(){e.apply(this,arguments)}()}),[n]),x?x.length>0?(0,m.jsxs)("div",{className:"rounded flex flex-col",children:[(0,m.jsx)("div",{className:"text-sm flex items-center align-items justify-between mb-2",children:(0,m.jsx)("p",{className:"font-bold text-gray-base text-center",children:"Suggestions for you"})}),(0,m.jsx)("div",{className:"mt-2 grid gap-2",children:x.map((function(e){return(0,m.jsx)(j,{profileDocId:e.docId,profileUsername:e.username,profileId:e.userId,userId:n,userDocId:t},e.docId)}))})]}):null:(0,m.jsx)(o.Z,{count:10,height:150,className:"mt-5"})}function g(){var e=(0,f.Z)().user,n=e.docId,t=e.fullName,s=e.username,r=e.userId,o=e.following;return(0,m.jsxs)("div",{className:"p-4",children:[(0,m.jsx)(h,{username:s,fullName:t}),(0,m.jsx)(v,{userId:r,docId:n,following:o})]})}function b(){return(0,s.useEffect)((function(){document.title="Instagram"}),[]),(0,m.jsxs)("div",{className:"bg-gray-background",children:[(0,m.jsx)(r.Z,{}),(0,m.jsxs)("div",{className:"grid grid-cols-3 gap-4 justify-between mx-auto max-w-screen-lg",children:[(0,m.jsx)(x,{}),(0,m.jsx)(g,{})]})]})}}}]);
//# sourceMappingURL=128.96608e10.chunk.js.map