"use strict";(self.webpackChunkinsta_clone=self.webpackChunkinsta_clone||[]).push([[577],{7937:function(e,n,t){t.d(n,{Z:function(){return c}});var r=t(4165),o=t(5861),s=t(9439),l=t(2791),i=t(6307),a=t(7606);function c(){var e=(0,l.useState)({}),n=(0,s.Z)(e,2),t=n[0],c=n[1],u=(0,l.useContext)(i.Z).user,d=(0,l.useCallback)((0,o.Z)((0,r.Z)().mark((function e(){var n,t,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.xD)(u.uid);case 2:n=e.sent,t=(0,s.Z)(n,1),o=t[0],c(o);case 6:case"end":return e.stop()}}),e)}))),[u]);return(0,l.useEffect)((function(){null!==u&&void 0!==u&&u.uid&&d()}),[u]),{user:t}}},3577:function(e,n,t){t.r(n),t.d(n,{default:function(){return y}});var r=t(4165),o=t(5861),s=t(9439),l=t(7689),i=t(2791),a=t(7606),c=t(8155),u=t(9353),d=t(1413),f=t(6307),h=t(2579),p=(t(5862),t(7937)),m=t(184);function x(e){var n=e.photosCount,t=e.profile,l=t.docId,c=t.userId,u=t.username,d=t.fullName,f=t.followers,x=void 0===f?[]:f,v=t.following,w=void 0===v?[]:v,g=e.followerCount,Z=e.followingCount,j=e.setFollowerCount,y=(0,p.Z)().user,b=y.username,C=(0,i.useState)(!1),N=(0,s.Z)(C,2),k=N[0],I=N[1],E=u&&u!==b,F=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return I((function(e){return!e})),j({followerCount:k?g-1:g+1}),e.next=4,(0,a.Gm)(k,y.docId,l,c,y.userId);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,i.useEffect)((function(){var e=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.IU)(y.username,c);case 2:n=e.sent,I(n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();y.username&&c&&e()}),[y.username,c]),u?(0,m.jsxs)("div",{className:"grid grid-cols-3 gap-4 justify-between mx-auto",children:[(0,m.jsx)("div",{className:"container flex justify-center",children:(0,m.jsx)("img",{className:"rounded-full h-40 w-40  flex",alt:"".concat(u," profile"),src:"/images/avatars/".concat(u,".jpg")})}),(0,m.jsxs)("div",{className:"flex items-center justify-center flex-col col-span-2",children:[(0,m.jsxs)("div",{className:"container flex items-center",children:[(0,m.jsx)("p",{className:"text-2xl mr-4",children:u}),E&&(0,m.jsx)("button",{className:"bg-blue-medium font-bold text-sm rounded text-white w-20 h-8",type:"button",onClick:F,onKeyDown:function(e){"Enter"===e.key&&F()},children:k?"Unfollow":"Follow"})]}),(0,m.jsx)("div",{className:"container flex mt-4",children:void 0===x||void 0===w?(0,m.jsx)(h.Z,{count:1,width:677,height:24}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("p",{className:"mr-10",children:[(0,m.jsx)("span",{className:"font-bold",children:n})," Photos"]}),(0,m.jsxs)("p",{className:"mr-10",children:[(0,m.jsx)("span",{className:"font-bold",children:g})," ",1===g?"Follower":"Followers"]}),(0,m.jsxs)("p",{className:"mr-10",children:[(0,m.jsx)("span",{className:"font-bold",children:Z})," ","Following"]})]})}),(0,m.jsx)("div",{className:"container mt-4",children:(0,m.jsx)("p",{className:"font-medium",children:d||(0,m.jsx)(h.Z,{count:1,height:24,width:677})})})]})]}):(0,m.jsx)(h.Z,{count:1,width:"100%",height:200})}var v=t(1087),w=t(2303);function g(e){var n=e.docId,t=e.likedPhoto,l=e.totalLikes,a=(0,i.useContext)(f.Z).user,c=null===a||void 0===a?void 0:a.uid,u=(0,i.useState)(t),d=(0,s.Z)(u,2),h=d[0],p=d[1],x=(0,i.useState)(l),v=(0,s.Z)(x,2),g=v[0],Z=v[1],j=(0,i.useContext)(w.Z),y=j.firebase,b=j.FieldValue,C=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c){e.next=5;break}return p((function(e){return!e})),e.next=4,y.firestore().collection("photos").doc(n).update({likes:h?b.arrayRemove(c):b.arrayUnion(c)});case 4:Z((function(e){return h?e-1:e+1}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,m.jsxs)("p",{className:"flex items-center text-white font-bold",children:[(0,m.jsx)("svg",{onClick:function(){return C()},onKeyDown:function(e){"Enter"===e.key&&C()},xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-8 mr-4 select-none ".concat(c?"cursor-pointer":"cursor-auto"," focus:outline-none ").concat(h?"fill-red text-red-primary":"text-white"),children:(0,m.jsx)("path",{fillRule:"evenodd",d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z",clipRule:"evenodd"})}),g]})}function Z(e){var n=e.photos,t=e.profile;return(0,m.jsxs)("div",{className:"h-16 border-t border-gray-primary mt-12 pt-4",children:[(0,m.jsx)("div",{className:"grid grid-cols-3 gap-8 mt-4 mb-12 pb-4",children:n?n.length>0?n.map((function(e){return(0,m.jsxs)("div",{className:"relative group",children:[(0,m.jsx)("img",{src:e.imageSrc,alt:e.caption}),(0,m.jsxs)("div",{className:"absolute bottom-0 left-0 bg-gray-200 z-10 w-full justify-evenly items-center h-full bg-black-faded group-hover:flex hidden",children:[(0,m.jsx)(g,{docId:e.docId,likedPhoto:e.userLikedPhoto,totalLikes:e.likes.length}),(0,m.jsxs)("p",{className:"flex items-center text-white font-bold",children:[(0,m.jsx)(v.rU,{to:"/p/".concat(t.username,"/").concat(e.photoId),children:(0,m.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-8 mr-4",children:(0,m.jsx)("path",{fillRule:"evenodd",d:"M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z",clipRule:"evenodd"})})}),e.comments.length]})]})]},e.docId)})):null:(0,m.jsx)(h.Z,{count:12,width:320,height:400})}),!n||0===n.length&&(0,m.jsx)("p",{className:"text-center text-2xl",children:"No Posts Yet"})]})}function j(e){var n=e.user,t=(0,i.useContext)(f.Z).user,l=null===t||void 0===t?void 0:t.uid,c=(0,i.useReducer)((function(e,n){return(0,d.Z)((0,d.Z)({},e),n)}),{profile:{},photosCollection:[],followerCount:0,followingCount:0}),u=(0,s.Z)(c,2),h=u[0],p=h.profile,v=h.photosCollection,w=h.followerCount,g=h.followingCount,j=u[1];return(0,i.useEffect)((function(){function e(){return(e=(0,o.Z)((0,r.Z)().mark((function e(){var t,o,s,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.userId,o=n.followers,s=n.following,e.next=3,(0,a.oJ)(t,l);case 3:i=e.sent,j({profile:n,photosCollection:i,followerCount:o.length,followingCount:s.length});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[n]),(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(x,{photosCount:v?v.length:0,profile:p,followerCount:w,followingCount:g,setFollowerCount:j}),(0,m.jsx)(Z,{photos:v,profile:p})]})}function y(){var e=(0,l.UO)().username,n=(0,i.useState)(null),t=(0,s.Z)(n,2),d=t[0],f=t[1],h=(0,l.s0)();return(0,i.useEffect)((function(){function n(){return(n=(0,o.Z)((0,r.Z)().mark((function n(){var t;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,a.dQ)(e);case 2:(t=n.sent).length>0?f(t[0]):h(c.Hi);case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}!function(){n.apply(this,arguments)}()}),[e,h]),null!==d&&void 0!==d&&d.username?(0,m.jsxs)("div",{className:"bg-gray-background",children:[(0,m.jsx)(u.Z,{}),(0,m.jsx)("div",{className:"mx-auto max-w-screen-lg",children:(0,m.jsx)(j,{user:d})})]}):null}},5862:function(){},2579:function(e,n,t){t.d(n,{Z:function(){return u}});var r=t(9439),o=t(1413),s=t(4925),l=t(2791),i=["count","wrapper","className","containerClassName","containerTestId","circle","style"],a=l.createContext({}),c=!0;function u(e){for(var n,t,u,d=e.count,f=void 0===d?1:d,h=e.wrapper,p=e.className,m=e.containerClassName,x=e.containerTestId,v=e.circle,w=void 0!==v&&v,g=e.style,Z=(0,s.Z)(e,i),j=l.useContext(a),y=(0,o.Z)({},Z),b=0,C=Object.entries(Z);b<C.length;b++){var N=(0,r.Z)(C[b],2),k=N[0];"undefined"===typeof N[1]&&delete y[k]}var I=(0,o.Z)((0,o.Z)((0,o.Z)({},j),y),{},{circle:w}),E=(0,o.Z)((0,o.Z)({},g),function(e){var n=e.baseColor,t=e.highlightColor,r=e.width,o=e.height,s=e.borderRadius,l=e.circle,i=e.direction,a=e.duration,u=e.enableAnimation,d=void 0===u?c:u,f={};return"rtl"===i&&(f["--animation-direction"]="reverse"),"number"===typeof a&&(f["--animation-duration"]="".concat(a,"s")),d||(f["--pseudo-element-display"]="none"),"string"!==typeof r&&"number"!==typeof r||(f.width=r),"string"!==typeof o&&"number"!==typeof o||(f.height=o),"string"!==typeof s&&"number"!==typeof s||(f.borderRadius=s),l&&(f.borderRadius="50%"),"undefined"!==typeof n&&(f["--base-color"]=n),"undefined"!==typeof t&&(f["--highlight-color"]=t),f}(I)),F="react-loading-skeleton";p&&(F+=" ".concat(p));for(var R=null!==(n=I.inline)&&void 0!==n&&n,z=[],L=Math.ceil(f),S=0;S<L;S++){var M=E;if(L>f&&S===L-1){var P=null!==(t=M.width)&&void 0!==t?t:"100%",U=f%1,V="number"===typeof P?P*U:"calc(".concat(P," * ").concat(U,")");M=(0,o.Z)((0,o.Z)({},M),{},{width:V})}var D=l.createElement("span",{className:F,style:M,key:S},"\u200c");R?z.push(D):z.push(l.createElement(l.Fragment,{key:S},D,l.createElement("br",null)))}return l.createElement("span",{className:m,"data-testid":x,"aria-live":"polite","aria-busy":null!==(u=I.enableAnimation)&&void 0!==u?u:c},h?z.map((function(e,n){return l.createElement(h,{key:n},e)})):z)}}}]);
//# sourceMappingURL=577.8869f9b3.chunk.js.map